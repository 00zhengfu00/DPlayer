{"version":3,"sources":["DPlayer.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","DPlayer","option","_this","this","svg","play","pause","volume-up","volume-down","volume-off","loop","full","isMobile","navigator","userAgent","match","autoplay","defaultOption","element","document","getElementsByClassName","theme","defaultKey","hasOwnProperty","audios","secondToTime","second","add0","num","min","parseInt","sec","updateBar","type","percentage","direction","style","eventTypes","event","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","trigger","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","func","_this2","playedBar","loadedBar","thumb","bar","barWidth","addEventListener","e","window","clientWidth","clientX","getElementViewLeft","innerHTML","audio","duration","currentTime","parseFloat","width","background","thumbMove","showlrc","updateLrc","thumbUp","removeEventListener","clearInterval","playedTime","loopEle","classList","add","multiple","remove","buffered","end","ended","volume","height","indexMusic","_this3","paused","button","setTimeout","setInterval","_this4","name","push","module","exports"],"mappings":"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","file":"DPlayer.min.js","sourcesContent":["(() => {\n\n    class DPlayer {\n    /**\n     * DPlayer constructor function\n     *\n     * @param {Object} option - See README\n     * @constructor\n     */\n    constructor(option) {\n        this.svg = {\n            'play': ['0 0 16 32', 'M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z'],\n            'pause': ['0 0 17 32', 'M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z'],\n            'volume-up': ['0 0 30 32', 'M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056zM29.728 16q0 4.096-2.272 7.552t-6.048 5.056q-0.224 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.64 0.704-1.056 0.128-0.064 0.384-0.192t0.416-0.192q0.8-0.448 1.44-0.896 2.208-1.632 3.456-4.064t1.216-5.152-1.216-5.152-3.456-4.064q-0.64-0.448-1.44-0.896-0.128-0.096-0.416-0.192t-0.384-0.192q-0.704-0.416-0.704-1.056 0-0.448 0.32-0.8t0.832-0.352q0.224 0 0.448 0.096 3.776 1.632 6.048 5.056t2.272 7.552z'],\n            'volume-down': ['0 0 21 32', 'M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z'],\n            'volume-off': ['0 0 14 32', 'M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z'],\n            'loop': ['0 0 32 32', 'M1.882 16.941c0 4.152 3.221 7.529 7.177 7.529v1.882c-4.996 0-9.060-4.222-9.060-9.412s4.064-9.412 9.060-9.412h7.96l-3.098-3.098 1.331-1.331 5.372 5.37-5.37 5.372-1.333-1.333 3.1-3.098h-7.962c-3.957 0-7.177 3.377-7.177 7.529zM22.94 7.529v1.882c3.957 0 7.177 3.377 7.177 7.529s-3.221 7.529-7.177 7.529h-7.962l3.098-3.098-1.331-1.331-5.37 5.37 5.372 5.372 1.331-1.331-3.1-3.1h7.96c4.998 0 9.062-4.222 9.062-9.412s-4.064-9.412-9.060-9.412z'],\n            'full': ['0 0 32 32', 'M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z']\n        };\n\n        this.isMobile = navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);\n        // compatibility: some mobile browsers don't suppose autoplay\n        if (this.isMobile) {\n            option.autoplay = false;\n        }\n\n        // default options\n        const defaultOption = {\n            element: document.getElementsByClassName('dplayer')[0],\n            autoplay: false,\n            theme: '#b7daff'\n        };\n        for (let defaultKey in defaultOption) {\n            if (defaultOption.hasOwnProperty(defaultKey) && !option.hasOwnProperty(defaultKey)) {\n                option[defaultKey] = defaultOption[defaultKey];\n            }\n        }\n\n        this.option = option;\n        this.audios = [];\n        this.loop = true;\n\n        /**\n         * Parse second to 00:00 format\n         *\n         * @param {Number} second\n         * @return {String} 00:00 format\n         */\n        this.secondToTime = (second) => {\n            const add0 = (num) => {\n                return num < 10 ? '0' + num : '' + num;\n            };\n            const min = parseInt(second / 60);\n            const sec = parseInt(second - min * 60);\n            return add0(min) + ':' + add0(sec);\n        };\n\n        /**\n         * Update progress bar, including loading progress bar and play progress bar\n         *\n         * @param {String} type - Point out which bar it is, should be played loaded or volume\n         * @param {Number} percentage\n         * @param {String} direction - Point out the direction of this bar, Should be height or width\n         */\n        this.updateBar = (type, percentage, direction) => {\n            percentage = percentage > 0 ? percentage : 0;\n            percentage = percentage < 1 ? percentage : 1;\n            this[type + 'Bar'].style[direction] = percentage * 100 + '%';\n        };\n\n        // define DPlayer events\n        this.eventTypes = ['play', 'pause', 'canplay', 'playing', 'ended', 'error'];\n        this.event = {};\n        for (let type of this.eventTypes) {\n            this.event[type] = [];\n        }\n        this.trigger = (type) => {\n            for (let func of this.event[type]) {\n                func();\n            }\n        }\n    };\n\n    /**\n     * AutoLink initialization function\n     */\n    init() {\n        this.element = this.option.element;\n\n        // control play progress\n        this.playedBar = this.element.getElementsByClassName('dplayer-played')[0];\n        this.loadedBar = this.element.getElementsByClassName('dplayer-loaded')[0];\n        this.thumb = this.element.getElementsByClassName('dplayer-thumb')[0];\n        this.bar = this.element.getElementsByClassName('dplayer-bar')[0];\n        let barWidth;\n        this.bar.addEventListener('click', (event) => {\n            const e = event || window.event;\n            barWidth = this.bar.clientWidth;\n            const percentage = (e.clientX - getElementViewLeft(this.bar)) / barWidth;\n            this.updateBar('played', percentage, 'width');\n            this.element.getElementsByClassName('dplayer-ptime')[0].innerHTML = this.secondToTime(percentage * this.audio.duration);\n            this.audio.currentTime = parseFloat(this.playedBar.style.width) / 100 * this.audio.duration;\n        });\n\n        this.thumb.addEventListener('mouseover', () => {\n            this.thumb.style.background = this.option.theme;\n        });\n        this.thumb.addEventListener('mouseout', () => {\n            this.thumb.style.background = '#fff';\n        });\n\n        const thumbMove = (event) => {\n            const e = event || window.event;\n            let percentage = (e.clientX - getElementViewLeft(this.bar)) / barWidth;\n            percentage = percentage > 0 ? percentage : 0;\n            percentage = percentage < 1 ? percentage : 1;\n            this.updateBar('played', percentage, 'width');\n            if (this.option.showlrc) {\n                this.updateLrc(parseFloat(this.playedBar.style.width) / 100 * this.audio.duration);\n            }\n            this.element.getElementsByClassName('dplayer-ptime')[0].innerHTML = this.secondToTime(percentage * this.audio.duration);\n        };\n\n        const thumbUp = () => {\n            document.removeEventListener('mouseup', thumbUp);\n            document.removeEventListener('mousemove', thumbMove);\n            this.audio.currentTime = parseFloat(this.playedBar.style.width) / 100 * this.audio.duration;\n            this.play();\n        };\n\n        this.thumb.addEventListener('mousedown', () => {\n            barWidth = this.bar.clientWidth;\n            clearInterval(this.playedTime);\n            document.addEventListener('mousemove', thumbMove);\n            document.addEventListener('mouseup', thumbUp);\n        });\n\n        // control volume\n        // this.volumeBar = this.element.getElementsByClassName('dplayer-volume')[0];\n        // const volumeBarWrap = this.element.getElementsByClassName('dplayer-volume-bar')[0];\n        // const volumeicon = this.element.getElementsByClassName('dplayer-time')[0].getElementsByTagName('i')[0];\n        // const barHeight = 35;\n        // this.element.getElementsByClassName('dplayer-volume-bar-wrap')[0].addEventListener('click', (event) => {\n        //     const e = event || window.event;\n        //     let percentage = (barHeight - e.clientY + getElementViewTop(volumeBarWrap)) / barHeight;\n        //     percentage = percentage > 0 ? percentage : 0;\n        //     percentage = percentage < 1 ? percentage : 1;\n        //     this.updateBar('volume', percentage, 'height');\n        //     this.audio.volume = percentage;\n        //     if (this.audio.muted) {\n        //         this.audio.muted = false;\n        //     }\n        //     if (percentage === 1) {\n        //         volumeicon.className = 'demo-icon dplayer-icon-volume-up';\n        //     }\n        //     else {\n        //         volumeicon.className = 'demo-icon dplayer-icon-volume-down';\n        //     }\n        // });\n        // volumeicon.addEventListener('click', () => {\n        //     if (this.audio.muted) {\n        //         this.audio.muted = false;\n        //         volumeicon.className = this.audio.volume === 1 ? 'demo-icon dplayer-icon-volume-up' : 'demo-icon dplayer-icon-volume-down';\n        //         this.updateBar('volume', this.audio.volume, 'height');\n        //     }\n        //     else {\n        //         this.audio.muted = true;\n        //         volumeicon.className = 'demo-icon dplayer-icon-volume-off';\n        //         this.updateBar('volume', 0, 'height');\n        //     }\n        // });\n\n        // get element's view position\n        // function getElementViewLeft(element) {\n        //     let actualLeft = element.offsetLeft;\n        //     let current = element.offsetParent;\n        //     let elementScrollLeft;\n        //     while (current !== null) {\n        //         actualLeft += current.offsetLeft;\n        //         current = current.offsetParent;\n        //     }\n        //     elementScrollLeft = document.body.scrollLeft + document.documentElement.scrollLeft;\n        //     return actualLeft - elementScrollLeft;\n        // }\n        //\n        // function getElementViewTop(element) {\n        //     let actualTop = element.offsetTop;\n        //     let current = element.offsetParent;\n        //     let elementScrollTop;\n        //     while (current !== null) {\n        //         actualTop += current.offsetTop;\n        //         current = current.offsetParent;\n        //     }\n        //     elementScrollTop = document.body.scrollTop + document.documentElement.scrollTop;\n        //     return actualTop - elementScrollTop;\n        // }\n\n        // loop control\n        const loopEle = this.element.getElementsByClassName('dplayer-looploop')[0];\n        loopEle.addEventListener('click', () => {\n            if (this.loop) {\n                loopEle.classList.add('dplayer-noloop');\n                this.loop = false;\n                this.audio.loop = this.multiple ? false : this.loop;\n            }\n            else {\n                loopEle.classList.remove('dplayer-noloop');\n                this.loop = true;\n                this.audio.loop = this.multiple ? false : this.loop;\n            }\n        });\n\n        // get this audio object\n        this.audio = this.element.getElementsByClassName('dplayer-video')[0];\n\n        // show audio time: the metadata has loaded or changed\n        this.audio.addEventListener('durationchange', () => {\n            if (this.audio.duration !== 1) {           // compatibility: Android browsers will output 1 at first\n                this.element.getElementsByClassName('dplayer-dtime')[0].innerHTML = this.secondToTime(this.audio.duration);\n            }\n        });\n\n        // show audio loaded bar: to inform interested parties of progress downloading the media\n        this.audio.addEventListener('progress', () => {\n            const percentage = this.audio.buffered.length ? this.audio.buffered.end(this.audio.buffered.length - 1) / this.audio.duration : 0;\n            this.updateBar('loaded', percentage, 'width');\n        });\n\n        // audio download error: an error occurs\n        this.audio.addEventListener('error', () => {\n            this.element.getElementsByClassName('dplayer-author')[0].innerHTML = ` - Error happens ╥﹏╥`;\n            this.trigger('pause');\n        });\n\n        // audio can play: enough data is available that the media can be played\n        this.audio.addEventListener('canplay', () => {\n            this.trigger('canplay');\n        });\n\n        // multiple music play\n        this.ended = false;\n        this.audio.addEventListener('ended', () => {\n            if (!this.loop) {\n                this.ended = true;\n                this.pause();\n                this.trigger('ended');\n            }\n        });\n\n        // control volume\n        this.audio.volume = parseInt(this.element.getElementsByClassName('dplayer-volume')[0].style.height) / 100;\n\n        // loop\n        this.audio.loop = this.multiple ? false : this.loop;\n\n        if (this.multiple) {\n            this.audios[indexMusic] = this.audio;\n        }\n\n        // set duration time\n        if (this.audio.duration !== 1) {           // compatibility: Android browsers will output 1 at first\n            this.element.getElementsByClassName('dplayer-dtime')[0].innerHTML = this.audio.duration ? this.secondToTime(this.audio.duration) : '00:00';\n        }\n\n        // autoplay\n        if (this.option.autoplay && !this.isMobile) {\n            this.play();\n        }\n        this.option.autoplay = true;  // autoplay next music\n\n        if (this.isMobile) {\n            this.pause();\n        }\n    }\n\n    /**\n     * Play music\n     */\n    play() {\n        if (this.audio.paused) {\n            this.button.classList.remove('dplayer-play');\n            this.button.classList.add('dplayer-pause');\n            this.button.innerHTML = '';\n            setTimeout(() => {\n                this.button.innerHTML = '<i class=\"demo-icon dplayer-icon-pause\"></i>';\n            }, 100);\n\n            this.audio.play();\n            if (this.playedTime) {\n                clearInterval(this.playedTime);\n            }\n            this.playedTime = setInterval(() => {\n                this.updateBar('played', this.audio.currentTime / this.audio.duration, 'width');\n                if (this.option.showlrc) {\n                    this.updateLrc();\n                }\n                this.element.getElementsByClassName('dplayer-ptime')[0].innerHTML = this.secondToTime(this.audio.currentTime);\n                this.trigger('playing');\n            }, 100);\n            this.trigger('play');\n        }\n    }\n\n    /**\n     * Pause music\n     */\n    pause() {\n        if (!this.audio.paused || this.ended) {\n            this.ended = false;\n            this.button.classList.remove('dplayer-pause');\n            this.button.classList.add('dplayer-play');\n            this.button.innerHTML = '';\n            setTimeout(() => {\n                this.button.innerHTML = '<i class=\"demo-icon dplayer-icon-play\"></i>';\n            }, 100);\n            this.audio.pause();\n            clearInterval(this.playedTime);\n            this.trigger('pause');\n        }\n    }\n\n    /**\n     * attach event\n     */\n    on(name, func) {\n        if (typeof func === 'function') {\n            this.event[name].push(func);\n        }\n    }\n}\n\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = DPlayer\n}\nelse {\n    window.DPlayer = DPlayer;\n}\n})();"],"sourceRoot":"/source/"}